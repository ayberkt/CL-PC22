\documentclass[handout,11pt]{beamer}
%\documentclass[slides]{beamer}

%\usetheme{Warsaw}
\usetheme{Montpellier}
\usefonttheme[onlymath]{serif}
\setbeamertemplate{headline}{}
\setbeamertemplate{navigation symbols}{}

%\usepackage[english,norsk,german]{babel}
\usepackage[utf8x]{inputenc}
\usepackage{times}
\usepackage[T1]{fontenc}
\usepackage{proof}
\usepackage{url}
\usepackage{verbatim}
\usepackage{hyperref}
\usepackage{graphics}

\usepackage{color}
\newcommand{\blue}[1]{\textcolor{blue}{#1}}
\newcommand{\red}[1]{\textcolor{red}{#1}}
\newcommand{\green}[1]{\textcolor{green}{#1}}

%\usepackage[all]{xy}
\usepackage{amssymb,amsmath}
%\usepackage{stmaryrd}

\newtheorem{proposition}{Proposition}

\newcommand{\weg}[1]{}
\newcommand{\Prop}{\mathit{Prop}}
\newcommand{\nat}{\mathbb{N}}
\newcommand{\set}[1]{\{#1\}}
\newcommand{\liff}{\leftrightarrow}
\newcommand{\proves}{\vdash}
\newcommand{\forces}{\mathrel{\Vdash}}
\newcommand{\deca}{${\lor}{\exists}{\land}$}

\newcommand{\XX}{\mbox{\sf X}}
\newcommand{\ndE}{\vdash_{\es}}
\newcommand{\ndX}{\vdash_{X}}
\newcommand{\ndxx}{\vdash_{\vec x}}
\newcommand{\ndY}{\vdash_{Y}}
\newcommand{\ndXx}{\vdash_{X,x}}
\newcommand{\ndXxi}{\vdash_{X,\vec x_i}}
\newcommand{\es}{\emptyset}

\newcommand{\covd}{\mathrel{\vartriangleleft}}
\newcommand{\covs}{\mathrel{\vartriangleright}}
\newcommand{\covT}{\mathrel{\vartriangleleft_T}}

\newcommand*{\C}{{\mathbb{C}}}
\newcommand*{\D}{{\mathbb{D}}}
\newcommand*{\E}{{\mathcal{E}}}
\newcommand*{\subvs}{_{\mathrm{vs}}}
\newcommand*{\subrn}{_{\mathrm{rn}}}
\newcommand*{\subts}{_{\mathrm{ts}}}

\newcommand{\Cvs}{\mathbb{C}\subvs}
\newcommand{\Crn}{\mathbb{C}\subrn}
\newcommand{\Cts}{\mathbb{C}\subts}
\newcommand{\Tvs}{T\subvs}
\newcommand{\Trn}{T\subrn}
\newcommand{\Tts}{T\subts}
\newcommand{\Fts}{\Vdash\subts}
\newcommand{\Fvs}{\Vdash\subvs}
\newcommand{\Frn}{\Vdash\subrn}
\newcommand{\FTvs}{\Vdash^T\subvs}
\newcommand{\FTrn}{\Vdash^T\subrn}
\newcommand{\stdcat}[1]{\textup{\bfseries #1}}
\newcommand{\blank}{\textup{--}}


\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\ConFilt}{ConFilt}
\DeclareMathOperator{\Sh}{Sh}
\DeclareMathOperator{\Psh}{PSh}
\DeclareMathOperator{\Ob}{Ob}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\cod}{cod}
\DeclareMathOperator{\Tm}{Tm}
\DeclareMathOperator{\Fact}{Fact}
\DeclareMathOperator{\Ima}{Im}
\DeclareMathOperator{\NV}{NV}



\title{A Site Model for Coherent Logic}
\author{Marc Bezem\\
Department of Informatics\\
University of Bergen\\
\mbox{ }\\
(based on jww U. Buchholtz and T. Coquand, 2018)
}
\date{September 2022}

\begin{document}

\frame{\titlepage}

\section[Outline]{}
\frame{\tableofcontents}


\section{A category of forcing conditions}

\subsection{Conditions as a category}

\begin{frame}
\frametitle{Categories of forcing conditions}
 \begin{itemize}[<+->]   %  [<+-| alert@+>]
   \item Fix a finite first-order signature $\Sigma$
   \item Fix a countably infinite set of variables $\XX=\set{x_0,x_1,\ldots}$
   \item Let $\Tm(X)$ be the set of $\Sigma$-terms over $X \subseteq \XX$    
   \item Define the category $\Cts$ having:
    \begin{itemize}[<+->]   %  [<+-| alert@+>]
    \item Objects denoted as pairs $(X;A)$,
    where $X$ is a finite subset of $\XX$ and $A$ is a finite set
    of atoms in the language defined by $\Sigma$ and $X$.
    (This means that only variables from $X$ may occur in $A$.)
    Such pairs $(X;A)$ are called \emph{conditions}.
    \item Morphisms denoted as $f : (Y;B) \to (X;A)$, where $f$ is a 
    \emph{term substitution} $X \to \Tm(Y)$ such that $Af \subseteq B$
    \item Composition $f\circ g$ of $g : (Z;C) \to (Y;B)$ with $f$ above is
    the substitution $X \to \Tm(Y)$ that is the composition $fg$
    (in diagram order!) of the respective substitutions
    \item Indentity morphisms $(X;A)\to(X;A)$ are identity 
    substitutions $X\to X$
    \end{itemize}
    \item Similarly to $\Cts$, define $\Cvs~(\Crn)$ when 
    in addition $f(X)\subseteq Y$ (and also $f$ injective)
 \end{itemize}
\end{frame}


\begin{frame}
\frametitle{Categories of forcing conditions (ctnd)}
 \begin{itemize}[<+->]   %  [<+-| alert@+>]
    \item $\Cts,\Cvs,\Crn$ are indeed categories with terminal object $(;)$
    \item Conditions will be denoted as, e.g., $(x,y,z;p(z),q(f(x),z,z))$
    \item Substitutions will be denoted as, e.g., $[y:=x,z:=g(x)]$
    \item Post-fixing substitutions in diagram order: $(Af)g = A(fg)$
    \item Depending on $\Sigma$, categories
    $\Cts,\Cvs,\Crn$ are rather different:
     \begin{itemize}
      \item $[x:=0],[x:=1]:(;)\rightrightarrows(x;)$ cannot be equalized    
      \item $[y:=w,z:=w]:(w;)\to(y,z;)$ can only be equalized non-injectively
     \end{itemize}
    \item Actually, $\Cts~(\Cvs)$ has all finite products (limits) 
    \item Depending on $\Sigma$, categories $\Cts,\Cvs,\Crn$ will 
    lead to different forcing semantics 
    (opportunities for independence proofs!)
    \item What does a condition mean? A finite, partial description
    of potential models. Time to consider a coherent theory $T$ ...       
 \end{itemize}
\end{frame}

\begin{frame}
\frametitle{Coverage}
 \begin{itemize}[<+->]   %  [<+-| alert@+>]
  \item Fix a coherent theory $T$
  \item Define inductively a relation $\covT$ between
  conditions and finite sets of conditions (denoted by $U,V,...$):    
   \begin{enumerate}
    \item[(base)] $C\covT\set{C}$ for all conditions $C$
    \item[(step)] If $T$ has an axiom $\forall\vec{x}.~
    (C \to (\exists\vec{y}_1.B_1) \lor \cdots \lor (\exists\vec{y}_n.B_n))$
    such that for some sequence of terms $\vec{t}$ with variables in $X$
    we have $C[\vec{t}/\vec{x}] \subseteq A$, then the following rule applies:   
\[
\frac{(X,\vec y_1; A,B_i[\vec{t}/\vec{x}]) \covT U_1 \quad \ldots
\quad (X,\vec y_n; A,B_i[\vec{t}/\vec{x}]) \covT U_n}
{(X;A) \covT \bigcup_{1\leq i\leq n} U_i}
\]
   \end{enumerate}
  \item Looks familiar? Let's take the semantic point of view.
  \item Example: if $T=\set{p\to(q\lor r)}$, 
  then $(;p)\covT\set{(;p,q),(;p,r)}$. The models of $T$ extending $(;p)$ are
  models extending $(;p,q)$ or models extending $(;p,r)$
  \item When $C \covd U$ (drop ${}_T$, also: $U \covs C$) 
  we say that $U$ covers $C$ 
 \end{itemize}
\end{frame}

\begin{frame}
\frametitle{Structural properties of the coverage}
 \begin{itemize}[<+->]   %  [<+-| alert@+>]
    \item The properties of $\covd$ use (any one of) $\Cts,\Cvs,\Crn$
    %\item We drop $T$ from the notation $\covT$
    \item Lemma ${\covd}1$. If $(X;A) \covd U$ and $(Y;B)\in U$,
    then $X\subseteq Y$ and $A\subseteq B$ and $i_{X,Y} : (Y;B)\to(X;A)$.
    Prf: easy induction on $\covd$.
    \item Lemma ${\covd}2$. If $f:D\to C$ and $C\covd U$, then there is
    $V\covs D$ such that, for any $E\in V$ there is an $F\in U$ such 
    that $g:E\to F$ with $g$ an extension of $f$.
    Proof: induction on $\covd$. Intuition: view $D$ as an (extension of) the
    $f$-instance of $C$. \red{NB $\Crn$ OK!}
    \item Lemma ${\covd}3$. If $C \covd U$ and for every $D\in U$
    we have a $V_D \covs D$, then $C\covd\bigcup_{D\in U} V_D$.
    Proof: induction on $\covd$. Intuition: transitivity.
    \item Together with ${\covd}0:~C \covd\set{C}$, ${\covd}$0--3
    provide what is needed for the coming definition of forcing to
    give a sound and complete semantics.
    \item Further abstraction $\rightsquigarrow$ Grothendieck topology and site
    
 \end{itemize}
\end{frame}

\begin{frame}
\frametitle{Forcing}

Let ${\covd}$ be a covering. % as in Definition~\ref{def:covering}.
For any condition $X=(n;N)$ and any $n$-closed first-order formula
$\phi$ we define the forcing relation
$X\Vdash\phi$ by induction on $\phi$ as follows:
\begin{enumerate}
\item $X\Vdash\top$;

\item $X\Vdash\bot$ if $X\covd\es$;
%(alternatively one can say that there is a dynamic proof of $\bot$ from $X$);

\item $X\Vdash\phi$ if $\phi$ is a fact and there is $U \covs X$ such that
$\phi\in Y$ for all $Y\in U$;
%(alternatively one can say that there is a dynamic proof of $\phi$ from $X$);

\item $X\Vdash\phi_1 \land \phi_2$ if $X\Vdash\phi_1$ and $X\Vdash\phi_2$;

\item $X\Vdash\phi_1 \lor \phi_2$ if for some $U$ we have
$X\covd U$ and  $Y\Vdash\phi_1$ or $Y\Vdash\phi_2$ for all $Y\in U$;

\item $X\Vdash\phi_1 \to \phi_2$ if for all maps $f:X\to Y$
we have $Y\Vdash\phi_2f$ whenever $Y\Vdash\phi_1f$;

\item $X\Vdash\forall x.\phi$ if for all maps $f:X\to Y$ we have 
 $Y\Vdash\phi f[x=t]$ for all $t\in Y$;
 
\item $X\Vdash\exists x.\phi$ if there is $U\covs X$ such that,
for all $Y\in U$, $Y\Vdash\phi[x=t]$ for some $t\in Ter(Y)$.

\end{enumerate}
\end{frame}

\end{document}

\begin{frame}
\frametitle{Title}
 \begin{itemize}[<+->]
    \item 
 \end{itemize}
\end{frame}


Th{\'e}ories coh{\'e}rentes et topos coh{\'e}rents,
    M.-F.~Coste and M.~Coste, 1975.
